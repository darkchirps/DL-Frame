"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.changeTxtFunc = changeTxtFunc;
const fs = require("fs");
const path = require("path");
const picBinPath = require("../config.json").picTxtPath;
function changeTxtFunc(pathStr) {
    // 确保输出目录存在
    if (!fs.existsSync(picBinPath)) {
        fs.mkdirSync(picBinPath, { recursive: true });
    }
    console.log(`开始处理目录: ${pathStr}`);
    // 递归处理目录
    processDirectory(pathStr);
    console.log('转换完成，输出路径为: ' + picBinPath);
}
;
// 递归处理目录的函数
function processDirectory(dirPath) {
    // 读取目录中的所有文件和子目录
    const items = fs.readdirSync(dirPath);
    // @ts-ignore
    items.forEach(item => {
        const fullPath = path.join(dirPath, item);
        const stat = fs.statSync(fullPath);
        if (stat.isDirectory()) {
            // 如果是目录，递归处理
            processDirectory(fullPath);
        }
        else if (stat.isFile()) {
            // 如果是文件，检查是否为图片文件
            if (item.endsWith('.jpg') || item.endsWith('.png')) {
                processImageFile(fullPath, dirPath, item);
            }
        }
    });
}
// 处理单个图片文件的函数
function processImageFile(filePath, dirPath, fileName) {
    const type = fileName.endsWith('.jpg') ? '.jpg' : '.png';
    const name = fileName.replace(type, '');
    // 读取文件并转换为base64
    const base64Data = fs.readFileSync(filePath, 'base64');
    const outputFileName = `${name}.txt`;
    const outputPath = path.join(picBinPath, outputFileName);
    fs.writeFileSync(outputPath, base64Data);
    console.log(`已转换: ${filePath} -> ${outputPath}`);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGljVG9UeHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zb3VyY2UvcGljVG9UeHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFLQSxzQ0FTQztBQWRELE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFFN0IsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsVUFBVSxDQUFDO0FBRXhELFNBQWdCLGFBQWEsQ0FBQyxPQUFlO0lBQ3pDLFdBQVc7SUFDWCxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDO1FBQzdCLEVBQUUsQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLFNBQVM7SUFDVCxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsR0FBRyxVQUFVLENBQUMsQ0FBQztBQUM3QyxDQUFDO0FBQUEsQ0FBQztBQUVGLFlBQVk7QUFDWixTQUFTLGdCQUFnQixDQUFDLE9BQWU7SUFDckMsaUJBQWlCO0lBQ2pCLE1BQU0sS0FBSyxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdEMsYUFBYTtJQUNiLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDakIsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDMUMsTUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVuQyxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDO1lBQ3JCLGFBQWE7WUFDYixnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMvQixDQUFDO2FBQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUN2QixrQkFBa0I7WUFDbEIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztnQkFDakQsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztZQUM5QyxDQUFDO1FBQ0wsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUNELGNBQWM7QUFDZCxTQUFTLGdCQUFnQixDQUFDLFFBQWdCLEVBQUUsT0FBZSxFQUFFLFFBQWdCO0lBQ3pFLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQ3pELE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLGlCQUFpQjtJQUNqQixNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN2RCxNQUFNLGNBQWMsR0FBRyxHQUFHLElBQUksTUFBTSxDQUFDO0lBQ3JDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBRXpELEVBQUUsQ0FBQyxhQUFhLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxRQUFRLE9BQU8sVUFBVSxFQUFFLENBQUMsQ0FBQztBQUNyRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcclxuXHJcbmNvbnN0IHBpY0JpblBhdGggPSByZXF1aXJlKFwiLi4vY29uZmlnLmpzb25cIikucGljVHh0UGF0aDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VUeHRGdW5jKHBhdGhTdHI6IHN0cmluZykge1xyXG4gICAgLy8g56Gu5L+d6L6T5Ye655uu5b2V5a2Y5ZyoXHJcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMocGljQmluUGF0aCkpIHtcclxuICAgICAgICBmcy5ta2RpclN5bmMocGljQmluUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhg5byA5aeL5aSE55CG55uu5b2VOiAke3BhdGhTdHJ9YCk7XHJcbiAgICAvLyDpgJLlvZLlpITnkIbnm67lvZVcclxuICAgIHByb2Nlc3NEaXJlY3RvcnkocGF0aFN0cik7XHJcbiAgICBjb25zb2xlLmxvZygn6L2s5o2i5a6M5oiQ77yM6L6T5Ye66Lev5b6E5Li6OiAnICsgcGljQmluUGF0aCk7XHJcbn07XHJcblxyXG4vLyDpgJLlvZLlpITnkIbnm67lvZXnmoTlh73mlbBcclxuZnVuY3Rpb24gcHJvY2Vzc0RpcmVjdG9yeShkaXJQYXRoOiBzdHJpbmcpIHtcclxuICAgIC8vIOivu+WPluebruW9leS4reeahOaJgOacieaWh+S7tuWSjOWtkOebruW9lVxyXG4gICAgY29uc3QgaXRlbXMgPSBmcy5yZWFkZGlyU3luYyhkaXJQYXRoKTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBwYXRoLmpvaW4oZGlyUGF0aCwgaXRlbSk7XHJcbiAgICAgICAgY29uc3Qgc3RhdCA9IGZzLnN0YXRTeW5jKGZ1bGxQYXRoKTtcclxuXHJcbiAgICAgICAgaWYgKHN0YXQuaXNEaXJlY3RvcnkoKSkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzmmK/nm67lvZXvvIzpgJLlvZLlpITnkIZcclxuICAgICAgICAgICAgcHJvY2Vzc0RpcmVjdG9yeShmdWxsUGF0aCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0LmlzRmlsZSgpKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaYr+aWh+S7tu+8jOajgOafpeaYr+WQpuS4uuWbvueJh+aWh+S7tlxyXG4gICAgICAgICAgICBpZiAoaXRlbS5lbmRzV2l0aCgnLmpwZycpIHx8IGl0ZW0uZW5kc1dpdGgoJy5wbmcnKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc0ltYWdlRmlsZShmdWxsUGF0aCwgZGlyUGF0aCwgaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vLyDlpITnkIbljZXkuKrlm77niYfmlofku7bnmoTlh73mlbBcclxuZnVuY3Rpb24gcHJvY2Vzc0ltYWdlRmlsZShmaWxlUGF0aDogc3RyaW5nLCBkaXJQYXRoOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHR5cGUgPSBmaWxlTmFtZS5lbmRzV2l0aCgnLmpwZycpID8gJy5qcGcnIDogJy5wbmcnO1xyXG4gICAgY29uc3QgbmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UodHlwZSwgJycpO1xyXG4gICAgLy8g6K+75Y+W5paH5Lu25bm26L2s5o2i5Li6YmFzZTY0XHJcbiAgICBjb25zdCBiYXNlNjREYXRhID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoLCAnYmFzZTY0Jyk7XHJcbiAgICBjb25zdCBvdXRwdXRGaWxlTmFtZSA9IGAke25hbWV9LnR4dGA7XHJcbiAgICBjb25zdCBvdXRwdXRQYXRoID0gcGF0aC5qb2luKHBpY0JpblBhdGgsIG91dHB1dEZpbGVOYW1lKTtcclxuXHJcbiAgICBmcy53cml0ZUZpbGVTeW5jKG91dHB1dFBhdGgsIGJhc2U2NERhdGEpO1xyXG4gICAgY29uc29sZS5sb2coYOW3sui9rOaNojogJHtmaWxlUGF0aH0gLT4gJHtvdXRwdXRQYXRofWApO1xyXG59Il19